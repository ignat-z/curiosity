<%
  svg_icon = {
    empty:      '<svg viewBox="0 0 24 24" width="24" height="24" class="inline"></svg>',
    left_menu:  '<svg viewBox="0 0 24 24" width="24" height="24" class="pointer-events-none"><path fill="currentColor" d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" /></svg>',
    prev_month: '<svg viewBox="0 0 24 24" width="24" height="24" class="pointer-events-none"><path fill="currentColor" d="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z" /></svg>',
    next_month: '<svg viewBox="0 0 24 24" width="24" height="24" class="pointer-events-none"><path fill="currentColor" d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>',
    back_arrow: '<svg viewBox="0 0 24 24" width="24" height="24" class="pointer-events-none"><path fill="currentColor" d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>',
    show_month: '<svg viewBox="0 0 24 24" width="24" height="24" class="pointer-events-none inline"><path fill="currentColor" d="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z" /></svg>',
    hide_month: '<svg viewBox="0 0 24 24" width="24" height="24" class="pointer-events-none inline"><path fill="currentColor" d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z" /></svg>',
    today:      '<svg viewBox="0 0 24 24" width="24" height="24" class="pointer-events-none"><path fill="currentColor" d="M7,10H12V15H7M19,19H5V8H19M19,3H18V1H16V3H8V1H6V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3Z"></path></svg>',
    search:     '<svg viewBox="0 0 24 24" width="24" height="24" class="pointer-events-none"><path fill="currentColor" d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>'
  }.transform_values(&:html_safe)
%>

<div class="max-w-md mx-auto">

  <div data-controller="toggle" data-toggle-mapping-value="<%= { calendar: 'queue-nav--show-calendar', search: 'queue-nav--show-search' }.to_json %>" data-toggle-target="container">
    <%= turbo_frame_tag("menu") do %>
      <div class="flex p-2 bg-gray-900 text-white">
        <div class="left-menu px-2 py-1 hover:text-blue-500 cursor-pointer">
          <%= svg_icon[:left_menu] %>
        </div>

        <div class="queue-nav--prev-month-btn px-2 py-1 hover:text-blue-500 cursor-pointer">
          <%= link_to amaterasu_menus_path(today: @today - 1.month) do %>
            <%= svg_icon[:prev_month] %>
          <% end %>
        </div>

        <div class="queue-nav--icon-filler px-2 py-1">
          <%= svg_icon[:empty] %>
        </div>

        <div class="queue-nav--back-btn px-2 py-1 hover:text-blue-500 cursor-pointer" data-action='click->toggle#toggle' data-value='search'>
          <%= svg_icon[:back_arrow] %>
        </div>

        <div class="queue-nav--queue-search flex-grow">
          <%= form_tag(amaterasu_today_index_path, data: { turbo_frame: "result" }, method: :get) do %>
            <%= text_field_tag('search', nil, placeholder: "name or order information", class: "w-full p-1 text-gray-900") %>
          <% end %>
        </div>

        <div class="queue-nav--toggle-month-btn py-1 flex-grow text-center hover:text-blue-500 cursor-pointer select-none" data-action='click->toggle#toggle' data-value='calendar'>
          <%= @today.strftime("%B %Y") %>
          <span class="queue-nav--show-month"><%= svg_icon[:show_month] %></span>
          <span class="queue-nav--hide-month"><%= svg_icon[:hide_month] %></span>
        </div>

        <div class="queue-nav--next-month-btn px-2 py-1 hover:text-blue-500 cursor-pointer">
          <%= link_to amaterasu_menus_path(today: @today + 1.month) do %>
            <%= svg_icon[:next_month] %>
          <% end %>
        </div>

        <div class="queue-nav--today-btn px-2 py-1 hover:text-blue-500 cursor-pointer">
          <%= link_to amaterasu_today_index_path, data: { turbo_frame: "result" } do  %>
            <%= svg_icon[:today] %>
          <% end %>
        </div>

        <div class="queue-nav--search-btn px-2 py-1 hover:text-blue-500 cursor-pointer" data-action='click->toggle#toggle' data-value='search'>
          <%= svg_icon[:search] %>
        </div>
      </div>

      <div class="queue-nav--calender border border-gray-200 shadow text-center bg-blue-50 py-4">
        <%= render 'calender' do |day| %>
          <%= link_to(day.day, amaterasu_today_index_path(today: day), class: ("underline" if @dates.include?(day)) , data: { turbo_frame: "result", action: 'click->toggle#hide', value: 'calendar' }) %>
        <% end %>
      </div>
    <% end %>
  </div>

  <%= turbo_frame_tag("result", src: amaterasu_today_index_path) do %>
    <div class="text-xl text-center mt-5">
      Loading...
    </div>
  <% end %>

</div>
